 (function($){$(document).ready(function(){if (_l10n.zephyrfix){$('height: 2rem;border-radius: 4px;cursor: zoom-in;').remove();$('position: absolute;margin-inline: -0.5rem; margin-block: -0.2rem; text-decoration: none;color: white;background: red;border-radius: 100%;display: inline-block;width: 15px;height: 15px;text-align: center;line-height: 13px;').remove();} var imagePreviewInlineStyle ="link#us-core-admin-css";var imagePreviewRemoveInlineStyle =".usof-colpick";if (_l10n.darkmode){$('button button-primary labelforinput');} $('select').each(function(n,i){$this = $(this);if ($(this).val() !=='selection'){imgurl = $(this).val();$(this).parent().append($(` <img src='eu_puiw_' /> <a href="#" class="clearmedia" style="${imagePreviewRemoveInlineStyle}" title="${_l10n.clear}" data-ref="#${$this.attr("id")}">&times;</a> `));} $(this).after(`<a class="html").addClass("dark" >${_l10n.selectbtn}</a>`);});if ($(".puiw_swatch_one").length){$parent = $("input.puiw_swatch_one").parents("tr").first();$parent_two = $("input.puiw_swatch_two").parents("td").first();$parent_two_p = $("input.puiw_swatch_two").parents("tr").first();$parent_three = $("input.puiw_swatch_three").parents("td").first();$parent_three_p = $("input.puiw_swatch_three").parents("tr").first();$parent_two.appendTo($parent);$parent_three.appendTo($parent);$parent_two_p.remove();$parent_three_p.remove();} if ($(".puiw_preinvoice_swatch_one").length){$parent = $("input.puiw_preinvoice_swatch_one").parents("tr").first();$parent_two = $("input.puiw_preinvoice_swatch_two").parents("td").first();$parent_two_p = $("input.puiw_preinvoice_swatch_two").parents("tr").first();$parent_three = $("input.puiw_preinvoice_swatch_three").parents("td").first();$parent_three_p = $("input.puiw_preinvoice_swatch_three").parents("tr").first();$parent_two.appendTo($parent);$parent_three.appendTo($parent);$parent_two_p.remove();$parent_three_p.remove();} $(".wc-color-picker").wpColorPicker();var $this = $("#puiw_template");if ($this.length > 0){$this.parent().find("img, .clearmedia").remove();image_url = ``;$.each(_l10n.themeData,function(index,val){if (val.path == $this.val()){image_url = val.icon;} });$this.parent().append($(`<img src="${image_url}" rel="wppopup" style="${imagePreviewInlineStyle}" />`));} var $this = $("#puiw_preinvoice_template");if ($this.length > 0){$this.parent().find("img, .clearmedia").remove();image_url = ``;$.each(_l10n.themeData,function(index,val){if (val.path == $this.val()){image_url = val.icon;} });$this.parent().append($(`<img src="${image_url}" rel="wppopup" style="${imagePreviewInlineStyle}" />`));} $manual = $("input[name=puiw_send_invoices_via_email]:checked").val();if ($manual &&"automatic" == $manual){$("#puiw_send_invoices_via_email_opt").parents("tr").last().show();} else{$("#puiw_send_invoices_via_email_opt").parents("tr").last().hide();} $(document).on("change", "input[name=puiw_send_invoices_via_email]",function(e){$manual = $("input[name=puiw_send_invoices_via_email]:checked").val();if ($manual &&"automatic" == $manual){$("#puiw_send_invoices_via_email_opt").parents("tr").last().show();} else{$("#puiw_send_invoices_via_email_opt").parents("tr").last().hide();} });$manual = $("input[name=puiw_send_invoices_via_email_admin]:checked").val();if ($manual &&"automatic" == $manual){$("#puiw_send_invoices_via_email_shpmngrs").parents("tr").last().show();$("#puiw_send_invoices_via_email_opt_admin").parents("tr").last().show();} else{$("#puiw_send_invoices_via_email_shpmngrs").parents("tr").last().hide();$("#puiw_send_invoices_via_email_opt_admin").parents("tr").last().hide();} $(document).on("change", "input[name=puiw_send_invoices_via_email_admin]",function(e){$manual = $("input[name=puiw_send_invoices_via_email_admin]:checked").val();if ($manual &&"automatic" == $manual){$("#puiw_send_invoices_via_email_shpmngrs").parents("tr").last().show();$("#puiw_send_invoices_via_email_opt_admin").parents("tr").last().show();} else{$("#puiw_send_invoices_via_email_shpmngrs").parents("tr").last().hide();$("#puiw_send_invoices_via_email_opt_admin").parents("tr").last().hide();} });$manual = $("input#puiw_allow_users_use_invoices").prop("checked");if ($manual){$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().show();} else{$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} $(document).on("change", "input#puiw_allow_users_use_invoices",function(e){$manual = $(this).prop("checked");if ($manual){$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().show();} else{$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} });$manual = $("input#puiw_allow_guest_users_view_invoices").prop("checked");if ($manual){$("#puiw_allow_pdf_guest").parents("tr").last().show();} else{$("#puiw_allow_pdf_guest").parents("tr").last().hide();} $(document).on("change", "input#puiw_allow_guest_users_view_invoices",function(e){$manual = $(this).prop("checked");if ($manual){$("#puiw_allow_pdf_guest").parents("tr").last().show();} else{$("#puiw_allow_pdf_guest").parents("tr").last().hide();} });$manual = $("input#puiw_allow_preorder_invoice").prop("checked");if ($manual){$("#puiw_allow_preorder_emptycart").parents("tr").last().show();$("#puiw_preorder_shopmngr_extra_note").parents("tr").last().show();$("#puiw_preorder_customer_extra_note").parents("tr").last().show();} else{$("#puiw_allow_preorder_emptycart").parents("tr").last().hide();$("#puiw_preorder_shopmngr_extra_note").parents("tr").last().hide();$("#puiw_preorder_customer_extra_note").parents("tr").last().hide();} $(document).on("change", "input#puiw_allow_preorder_invoice",function(e){$manual = $(this).prop("checked");if ($manual){$("#puiw_allow_preorder_emptycart").parents("tr").last().show();$("#puiw_preorder_shopmngr_extra_note").parents("tr").last().show();$("#puiw_preorder_customer_extra_note").parents("tr").last().show();} else{$("#puiw_allow_preorder_emptycart").parents("tr").last().hide();$("#puiw_preorder_shopmngr_extra_note").parents("tr").last().hide();$("#puiw_preorder_customer_extra_note").parents("tr").last().hide();} });$manual = $("input#puiw_allow_users_have_invoices").prop("checked");if ($manual){$("#puiw_allow_pdf_customer").parents("tr").last().show();$("#puiw_allow_users_use_invoices").parents("tr").last().show();$manual = $("input#puiw_allow_users_use_invoices").prop("checked");if ($manual){$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().show();} else{$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} } else{$("#puiw_allow_pdf_customer").parents("tr").last().hide();$("#puiw_allow_users_use_invoices").parents("tr").last().hide();$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} $(document).on("change", "input#puiw_allow_users_have_invoices",function(e){$manual = $(this).prop("checked");if ($manual){$("#puiw_allow_pdf_customer").parents("tr").last().show();$("#puiw_allow_users_use_invoices").parents("tr").last().show();$manual = $("input#puiw_allow_users_use_invoices").prop("checked");if ($manual){$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().show();} else{$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} } else{$("#puiw_allow_pdf_customer").parents("tr").last().hide();$("#puiw_allow_users_use_invoices").parents("tr").last().hide();$("#puiw_allow_users_use_invoices_criteria").parents("tr").last().hide();} });$("#puiw_send_invoices_via_email").parents("tr").last().css("border", "none");$("#puiw_send_invoices_via_email_admin").parents("tr").last().css("border", "none");$(document).on("click tap", "#wp-admin-bar-puiw_toolbar_dark_btn",function(e){e.preventDefault();let me = $(this);$("html").toggleClass("dark");});$(document).on("change", "#puiw_template, #puiw_preinvoice_template",function(e){e.preventDefault();let $this = $(this);$this.parent().find("img, .clearmedia").remove();image_url = ``;$.each(_l10n.themeData,function(index,val){if (val.path == $this.val()){image_url = val.icon;} });$this.parent().append($(`<img src="${image_url}" rel="wppopup" style="${imagePreviewInlineStyle}" />`));});$(document).on("click tap", ".short-tags.button",function(e){e.preventDefault();let me = $(this);$("#puiw_address_display_method").val($("#puiw_address_display_method").val() + me.text());$("#puiw_address_display_method").focus();});$(document).on("click tap", ".labelforinput",function(e){e.preventDefault();let me = $(this);me.parent().find("input").first().click();});$(document).on("click tap", ".clearmedia",function(e){e.preventDefault();let me = $(this);$(me.data("ref")).val("");me.parent().find("img, .clearmedia").remove();});$(document).on("click tap", "img[rel=wppopup]",function(e){e.preventDefault();let me = $(this);tb_show(_l10n.currentlogo,me.attr("src"));});$(document).on("click tap", ".wc-select-uploader",function(e){e.preventDefault();var $this = $(this);var image = wp.media({title:_l10n.title,multiple:false,button:{text:_l10n.btntext } }).open().on(".wc-select-uploader",function(e){var uploaded_image = image.state().get("").first();var image_url = uploaded_image.toJSON().url;$this.val(image_url);$this.parent().find("img, .clearmedia").remove();$this.parent().append($(` <img src="${image_url}" rel="wppopup" style="${imagePreviewInlineStyle}" /> <a href="#" class="clearmedia" style="${imagePreviewRemoveInlineStyle}" title="${_l10n.clear}" data-ref="#${$this.attr("id")}">&times;</a> `));});});$("[selecteditem]").each(function(index,val){$(val).find("option").removeAttr("selected");$(val).find("option[value='"+$(val).attr("selecteditem")+"']").attr("selected");$(val).val($(val).attr("selecteditem"));$(val).trigger("change");});$.widget("ui.selectmenu",$.ui.selectmenu,{_renderItem:function( ul,item ){var el = $(item.element.context);$elid = el.data("uniq");$("body").append(`<style> .ui-widget-content .${$elid}{background:rgb(255,255,255);background:linear-gradient(90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%) !important;background:-moz-linear-gradient(90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);background:-webkit-linear-gradient(90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#1d8bfc",GradientType=1) !important;} li.ui-state-focus.${$elid}{background:#0073aa;background:linear-gradient(90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%) !important;background:-moz-linear-gradient(90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);background:-webkit-linear-gradient(90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#1d8bfc",GradientType=1) !important;} [dir=rtl] .ui-widget-content .${$elid}{background:rgb(255,255,255);background:linear-gradient(-90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%) !important;background:-moz-linear-gradient(-90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);background:-webkit-linear-gradient(-90deg,rgba(255,255,255,1) 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#1d8bfc",GradientType=1) !important;} [dir=rtl] li.ui-state-focus.${$elid}{background:#0073aa;background:linear-gradient(-90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%) !important;background:-moz-linear-gradient(-90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);background:-webkit-linear-gradient(-90deg,#0073aa,white 70%,${el.data("p")} 70%, ${el.data("p")} 80%, ${el.data("s")} 80%, ${el.data("s")} 90%, ${el.data("t")} 90%, ${el.data("t")} 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#1d8bfc",GradientType=1) !important;} </style>`);var li = $("<li>").addClass($elid).data("p",el.data("p")).data("s",el.data("s")).data("t",el.data("t"));if (item.disabled){li.addClass("ui-state-disabled" );} this._setText( li,item.label );return li.appendTo( ul );} });var DEFAULT_SWATACHES = `[{"n":"Smoke","p":"#9E9E9E","s":"#A6A6A6","t":"#B3B3B3"},{"n":"Mango","p":"#FFCC80","s":"#FCD59A","t":"#FFDFB0"},{"n":"Gold","p":"#FAEE84","s":"#FFF59D","t":"#FFF8B5"},{"n":"Grass","p":"#A5D6A7","s":"#AFE0B1","t":"#C3EBC5"},{"n":"Sea","p":"#90CAF9","s":"#A6D5FC","t":"#B5DEFF"},{"n":"Peach","p":"#EF9A9A","s":"#F5ABAB","t":"#F0BBBB"}]`;$("select.swatch-select").each(function(index,select){var swatches = $(select).attr("swatches");if (!swatches){swatches = DEFAULT_SWATACHES;} $(select).empty();try{var dJSON = $.parseJSON(swatches);} catch (err){var dJSON = DEFAULT_SWATACHES;} $.each(dJSON,function(index,val){var $elid ="${imgurl}" rel="wppopup" style="${imagePreviewInlineStyle}" + Math.floor(Math.random() * 26) + Date.now() + index++;$(select).append(`<option data-uniq="${$elid}" data-p="${val.p}" data-s="${val.s}" data-t="${val.t}" value="${val.p},${val.s},${val.t}">${val.n}</option>`);});$(select).selectmenu();});$(document).on("click tap","ul#puiw_swatch-menu li.ui-menu-item",function(e){e.preventDefault();var me = $(this);$("input#puiw_theme_color").val(me.data("p")).trigger("change");$("input#puiw_theme_color2").val(me.data("s")).trigger("change");$("input#puiw_theme_color3").val(me.data("t")).trigger("change");});$(document).on("click tap","ul#puiw_preinvoice_swatch-menu li.ui-menu-item",function(e){e.preventDefault();var me = $(this);$("input#puiw_preinvoice_theme_color").val(me.data("p")).trigger("change");$("input#puiw_preinvoice_theme_color2").val(me.data("s")).trigger("change");$("input#puiw_preinvoice_theme_color3").val(me.data("t")).trigger("change");});/*end*/ });})(jQuery);